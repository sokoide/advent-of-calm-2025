{
    "$schema": "https://calm.finos.org/release/1.1/meta/calm.json",
    "unique-id": "my-payment-system-architecture",
    "name": "My Payment System Architecture",
    "description": "An architecture representing a payment processing system and its internal components.",
    "nodes": [
        {
            "unique-id": "end-user",
            "node-type": "actor",
            "name": "End User",
            "description": "An end user or customer who uses the payment service to perform transactions."
        },
        {
            "unique-id": "payment-system",
            "node-type": "system",
            "name": "Payment System",
            "description": "The overall payment processing system."
        },
        {
            "unique-id": "payment-processing-service",
            "node-type": "service",
            "name": "Payment Processing Service",
            "description": "A service that handles credit card transactions.",
            "interfaces": [
                {
                    "unique-id": "payment-api-https",
                    "name": "Payment API",
                    "protocol": "HTTPS",
                    "host": "api.example.com",
                    "port": 443,
                    "path": "/api/v1"
                },
                {
                    "unique-id": "db-client",
                    "name": "Database Client",
                    "protocol": "JDBC",
                    "description": "Outbound connection to the transaction database."
                }
            ]
        },
        {
            "unique-id": "transaction-db",
            "node-type": "database",
            "name": "Transaction Database",
            "description": "Stores all payment transaction records.",
            "interfaces": [
                {
                    "unique-id": "sql-port",
                    "name": "SQL Port",
                    "description": "JDBC interface for database access.",
                    "protocol": "JDBC",
                    "host": "db.example.com",
                    "port": 5432,
                    "database": "payment_transactions"
                },
                {
                    "unique-id": "db-read-replica",
                    "name": "Read Replica Port",
                    "protocol": "JDBC",
                    "host": "db-replica.example.com",
                    "port": 5432,
                    "database": "payment_transactions"
                }
            ]
        }
    ],
    "relationships": [
        {
            "unique-id": "user-to-service-interaction",
            "description": "End user interacts with the payment service to submit transactions.",
            "relationship-type": {
                "interacts": {
                    "actor": "end-user",
                    "nodes": ["payment-processing-service"]
                }
            }
        },
        {
            "unique-id": "service-to-db",
            "description": "Payment service persists transactions to the database.",
            "relationship-type": {
                "connects": {
                    "source": {
                        "node": "payment-processing-service",
                        "interfaces": ["db-client"]
                    },
                    "destination": {
                        "node": "transaction-db",
                        "interfaces": ["sql-port"]
                    }
                }
            },
            "protocol": "JDBC"
        },
        {
            "unique-id": "system-composition",
            "description": "The payment system is composed of the processing service and the database.",
            "relationship-type": {
                "composed-of": {
                    "container": "payment-system",
                    "nodes": [
                        "payment-processing-service",
                        "transaction-db"
                    ]
                }
            }
        }
    ]
}